import{_ as S}from"./B-vrtETJ.js";import{y as v,a4 as b,d as o,cH as A,w as $,g as a,f,cI as k,t as u,r as p,z as q,B as D,C as B,A as x,c as d,D as w,F as j,bd as L,V as N}from"./Dm2-qtTF.js";import{r as y}from"./hTnyCtMQ.js";import{u as I}from"./Cta1Q9oF.js";import{q as T}from"./BP6xE_1H.js";import"./DlAUqK2U.js";const V={class:"overflow-hidden rounded-md border border-white/10 shadow-md shadow-zinc-950/50 transition-colors duration-200 hover:border-white/20"},z={class:"flex flex-col"},E={class:"text-lg font-semibold"},F={class:"text-xs text-muted"},M=v({__name:"ArticleCard",props:{title:{type:String,required:!0},date:{type:String,required:!0},image:{type:String,required:!0},path:{type:String,required:!0}},setup(e){return(n,m)=>{const l=k,i=A;return o(),b(i,{to:e.path,"aria-label":e.title,class:"flex cursor-pointer flex-col gap-2"},{default:$(()=>[a("div",V,[f(l,{width:"1536",alt:`${e.title} article image`,class:"h-64 w-full object-cover transition-transform duration-200 hover:scale-105",src:e.image,"aria-label":`${e.title} article image`},null,8,["alt","src","aria-label"])]),a("div",z,[a("h3",E,u(e.title),1),a("span",F,u(e.date),1)])]),_:1},8,["to","aria-label"])}}}),O=Object.assign(M,{__name:"ArticleCard"}),U={class:"mx-auto mt-4 flex max-w-4xl flex-col p-7 sm:mt-20"},G={class:"font-newsreader italic text-white-shadow text-center text-4xl"},H={class:"text-center text-lg font-extralight italic text-muted"},J={key:1,class:"flex h-64 flex-col items-center justify-center gap-2"},K={class:"text-2xl"},P={class:"text-sm"},Q=v({__name:"Story",async setup(e){let n,m;const l=p([]),i=p("");p(!1);const{locale:_}=q(),{data:c}=([n,m]=D(async()=>I("articles-"+_.value,async()=>{const t="articles_"+_.value;return await T(t).all()},{watch:[_]})),n=await n,m(),n);if(c.value.sort(function(t,s){return new Date(s.date)-new Date(t.date)}),!c.value)throw B({statusCode:404,statusMessage:"Страницата не е намерена..."});x(()=>{var t;return Array.from(new Set((t=c.value)==null?void 0:t.flatMap(s=>s.tags)))});const g=x(()=>{var t;return((t=c.value)==null?void 0:t.filter(s=>(l.value.length===0||l.value.some(h=>s.tags.includes(h)))&&(i.value===""||s.title.toLowerCase().includes(i.value.toLowerCase()))))??[]});return(t,s)=>{const h=S,C=O;return o(),d("section",U,[a("h1",G,[y(t.$slots,"title",{mdcUnwrap:"p"})]),a("h2",H,[y(t.$slots,"subtitle",{mdcUnwrap:"p"})]),f(h,{class:"mb-8 mt-2"}),w(g).length?(o(),b(N,{key:0,name:"list",tag:"ul",class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},{default:$(()=>[(o(!0),d(j,null,L(w(g),r=>(o(),d("li",{key:r.path},[f(C,{title:r.title,date:r.date,image:r.image,path:r.path},null,8,["title","date","image","path"])]))),128))]),_:1})):(o(),d("div",J,[a("span",K,u(t.$t("writing.not_found")),1),a("span",P,u(t.$t("writing.not_found_description")),1)]))])}}}),et=Object.assign(Q,{__name:"Story"});export{et as default};
